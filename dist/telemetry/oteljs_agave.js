var oteljs_agave=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=31)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Unspecified=0]="Unspecified",e[e.String=1]="String",e[e.Int64=2]="Int64",e[e.Double=3]="Double",e[e.Boolean=4]="Boolean",e[e.Date=5]="Date"}(t.AWTPropertyType||(t.AWTPropertyType={})),function(e){e[e.NotSet=0]="NotSet",e[e.DistinguishedName=1]="DistinguishedName",e[e.GenericData=2]="GenericData",e[e.IPV4Address=3]="IPV4Address",e[e.IPv6Address=4]="IPv6Address",e[e.MailSubject=5]="MailSubject",e[e.PhoneNumber=6]="PhoneNumber",e[e.QueryString=7]="QueryString",e[e.SipAddress=8]="SipAddress",e[e.SmtpAddress=9]="SmtpAddress",e[e.Identity=10]="Identity",e[e.Uri=11]="Uri",e[e.Fqdn=12]="Fqdn",e[e.IPV4AddressLegacy=13]="IPV4AddressLegacy"}(t.AWTPiiKind||(t.AWTPiiKind={})),function(e){e[e.NotSet=0]="NotSet",e[e.GenericContent=1]="GenericContent"}(t.AWTCustomerContentKind||(t.AWTCustomerContentKind={})),function(e){e[e.Low=1]="Low",e[e.Normal=2]="Normal",e[e.High=3]="High",e[e.Immediate_sync=5]="Immediate_sync"}(t.AWTEventPriority||(t.AWTEventPriority={})),function(e){e[e.NonRetryableStatus=1]="NonRetryableStatus",e[e.QueueFull=3]="QueueFull",e[e.MaxRetryLimit=4]="MaxRetryLimit"}(t.AWTEventsDroppedReason||(t.AWTEventsDroppedReason={})),function(e){e[e.InvalidEvent=1]="InvalidEvent",e[e.SizeLimitExceeded=2]="SizeLimitExceeded",e[e.KillSwitch=3]="KillSwitch"}(t.AWTEventsRejectedReason||(t.AWTEventsRejectedReason={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.AWTPropertyType=i.AWTPropertyType,t.AWTPiiKind=i.AWTPiiKind,t.AWTEventPriority=i.AWTEventPriority,t.AWTEventsDroppedReason=i.AWTEventsDroppedReason,t.AWTEventsRejectedReason=i.AWTEventsRejectedReason,t.AWTCustomerContentKind=i.AWTCustomerContentKind;var r=n(6);t.AWTUserIdType=r.AWTUserIdType,t.AWTSessionState=r.AWTSessionState;var o=n(12);t.AWT_BEST_EFFORT=o.AWT_BEST_EFFORT,t.AWT_NEAR_REAL_TIME=o.AWT_NEAR_REAL_TIME,t.AWT_REAL_TIME=o.AWT_REAL_TIME;var s=n(7);t.AWTEventProperties=s.default;var a=n(13);t.AWTLogger=a.default;var u=n(17);t.AWTLogManager=u.default;var c=n(30);t.AWTTransmissionManager=c.default;var l=n(15);t.AWTSerializer=l.default;var d=n(9);t.AWTSemanticContext=d.default,t.AWT_COLLECTOR_URL_UNITED_STATES="https://us.pipe.aria.microsoft.com/Collector/3.0/",t.AWT_COLLECTOR_URL_GERMANY="https://de.pipe.aria.microsoft.com/Collector/3.0/",t.AWT_COLLECTOR_URL_JAPAN="https://jp.pipe.aria.microsoft.com/Collector/3.0/",t.AWT_COLLECTOR_URL_AUSTRALIA="https://au.pipe.aria.microsoft.com/Collector/3.0/",t.AWT_COLLECTOR_URL_EUROPE="https://eu.pipe.aria.microsoft.com/Collector/3.0/",t.AWT_COLLECTOR_URL_USGOV_DOD="https://pf.pipe.aria.microsoft.com/Collector/3.0",t.AWT_COLLECTOR_URL_USGOV_DOJ="https://tb.pipe.aria.microsoft.com/Collector/3.0"},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),r=n(0),o=/[xy]/g;t.EventNameAndTypeRegex=/^[a-zA-Z]([a-zA-Z0-9]|_){2,98}[a-zA-Z0-9]$/,t.EventNameDotRegex=/\./g,t.PropertyNameRegex=/^[a-zA-Z](([a-zA-Z0-9|_|\.]){0,98}[a-zA-Z0-9])?$/,t.StatsApiKey="a387cfcf60114a43a7699f9fbb49289e-9bceb9fe-1c06-460f-96c5-6a0b247358bc-7238";var s=null,a=null,u=null;function c(e){return"string"==typeof e}function l(e){return"number"==typeof e}function d(e){return"boolean"==typeof e}function p(e){return e instanceof Date}function f(e){return 1e4*(e+621355968e5)}function _(){return!("undefined"==typeof navigator||!navigator.product)&&"ReactNative"===navigator.product}function h(){return"object"==typeof self&&"ServiceWorkerGlobalScope"===self.constructor.name}function v(e){return e<10?"0"+e:e.toString()}function y(e){return null==e||""===e}t.numberToBondInt64=function(e){var t=new i.Int64("0");return t.low=4294967295&e,t.high=Math.floor(e/4294967296),t},t.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(o,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},t.isString=c,t.isNumber=l,t.isBoolean=d,t.isDate=p,t.msToTicks=f,t.getTenantId=function(e){var t=e.indexOf("-");return t>-1?e.substring(0,t):""},t.isBeaconsSupported=function(){return null===s&&(s="undefined"!=typeof navigator&&Boolean(navigator.sendBeacon)),s},t.isUint8ArrayAvailable=function(){return null===a&&(a="undefined"!=typeof Uint8Array&&!function(){if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if((e.indexOf("safari")>=0||e.indexOf("firefox")>=0)&&e.indexOf("chrome")<0)return!0}return!1}()&&!_()),a},t.isPriority=function(e){return!(!l(e)||!(e>=1&&e<=3||5===e))},t.sanitizeProperty=function(e,n){return!t.PropertyNameRegex.test(e)||y(n)?null:(y(n.value)&&(n={value:n,type:r.AWTPropertyType.Unspecified}),n.type=function(e,t){switch(t=function(e){if(l(e)&&e>=0&&e<=4)return!0;return!1}(t)?t:r.AWTPropertyType.Unspecified){case r.AWTPropertyType.Unspecified:return function(e){switch(typeof e){case"string":return r.AWTPropertyType.String;case"boolean":return r.AWTPropertyType.Boolean;case"number":return r.AWTPropertyType.Double;case"object":return p(e)?r.AWTPropertyType.Date:null}return null}(e);case r.AWTPropertyType.String:return c(e)?t:null;case r.AWTPropertyType.Boolean:return d(e)?t:null;case r.AWTPropertyType.Date:return p(e)&&NaN!==e.getTime()?t:null;case r.AWTPropertyType.Int64:return l(e)&&e%1==0?t:null;case r.AWTPropertyType.Double:return l(e)?t:null}return null}(n.value,n.type),n.type?(p(n.value)&&(n.value=f(n.value.getTime())),n.pii>0&&n.cc>0?null:n.pii?function(e){if(l(e)&&e>=0&&e<=13)return!0;return!1}(n.pii)?n:null:n.cc?function(e){if(l(e)&&e>=0&&e<=1)return!0;return!1}(n.cc)?n:null:n):null)},t.getISOString=function(e){return e.getUTCFullYear()+"-"+v(e.getUTCMonth()+1)+"-"+v(e.getUTCDate())+"T"+v(e.getUTCHours())+":"+v(e.getUTCMinutes())+":"+v(e.getUTCSeconds())+"."+function(e){if(e<10)return"00"+e;if(e<100)return"0"+e;return e.toString()}(e.getUTCMilliseconds())+"Z"},t.useXDomainRequest=function(){if(null===u){var e=new XMLHttpRequest;u=void 0===e.withCredentials&&"undefined"!=typeof XDomainRequest}return u},t.useFetchRequest=function(){return _()||h()},t.isReactNative=_,t.isServiceWorkerGlobalScope=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),r=n(0),o=n(11),s=n(14),a=n(7),u=n(17),c=n(3),l=function(){function e(){}return e.setEventsHandler=function(e){this._eventHandler=e},e.getEventsHandler=function(){return this._eventHandler},e.scheduleTimer=function(){var e=this,t=this._profiles[this._currentProfile][2];this._timeout<0&&t>=0&&!this._paused&&(this._eventHandler.hasEvents()?(0===t&&this._currentBackoffCount>0&&(t=1),this._timeout=setTimeout((function(){return e._batchAndSendEvents()}),t*(1<<this._currentBackoffCount)*1e3)):this._timerCount=0)},e.initialize=function(e){var t=this;this._newEventsAllowed=!0,this._config=e,this._eventHandler=new o.default(e.collectorUri,e.cacheMemorySizeLimitInNumberOfEvents,e.httpXHROverride,e.clockSkewRefreshDurationInMins),this._initializeProfiles(),s.default.initialize((function(e,n){if(t._config.canSendStatEvent("awt_stats")){var i=new a.default("awt_stats");for(var o in i.setEventPriority(r.AWTEventPriority.High),i.setProperty("TenantId",n),e)e.hasOwnProperty(o)&&i.setProperty(o,e[o].toString());u.default.getLogger(c.StatsApiKey).logEvent(i)}}))},e.setTransmitProfile=function(e){this._currentProfile!==e&&void 0!==this._profiles[e]&&(this.clearTimeout(),this._currentProfile=e,this.scheduleTimer())},e.loadTransmitProfiles=function(e){for(var t in this._resetTransmitProfiles(),e)if(e.hasOwnProperty(t)){if(3!==e[t].length)continue;for(var n=2;n>=0;--n)if(e[t][n]<0){for(var i=n;i>=0;--i)e[t][i]=-1;break}for(n=2;n>0;--n)if(e[t][n]>0&&e[t][n-1]>0){var r=e[t][n-1]/e[t][n];e[t][n-1]=Math.ceil(r)*e[t][n]}this._profiles[t]=e[t]}},e.sendEvent=function(e){this._newEventsAllowed&&(this._currentBackoffCount>0&&e.priority===r.AWTEventPriority.Immediate_sync&&(e.priority=r.AWTEventPriority.High),this._eventHandler.addEvent(e),this.scheduleTimer())},e.flush=function(e){var t=(new Date).getTime();!this._paused&&this._lastUploadNowCall+3e4<t&&(this._lastUploadNowCall=t,this._timeout>-1&&(clearTimeout(this._timeout),this._timeout=-1),this._eventHandler.uploadNow(e))},e.pauseTransmission=function(){this._paused||(this.clearTimeout(),this._eventHandler.pauseTransmission(),this._paused=!0)},e.resumeTransmision=function(){this._paused&&(this._paused=!1,this._eventHandler.resumeTransmission(),this.scheduleTimer())},e.flushAndTeardown=function(){s.default.teardown(),this._newEventsAllowed=!1,this.clearTimeout(),this._eventHandler.teardown()},e.backOffTransmission=function(){this._currentBackoffCount<4&&(this._currentBackoffCount++,this.clearTimeout(),this.scheduleTimer())},e.clearBackOff=function(){this._currentBackoffCount>0&&(this._currentBackoffCount=0,this.clearTimeout(),this.scheduleTimer())},e._resetTransmitProfiles=function(){this.clearTimeout(),this._initializeProfiles(),this._currentProfile=i.AWT_REAL_TIME,this.scheduleTimer()},e.clearTimeout=function(){this._timeout>0&&(clearTimeout(this._timeout),this._timeout=-1,this._timerCount=0)},e._batchAndSendEvents=function(){var e=r.AWTEventPriority.High;this._timerCount++,this._timerCount*this._profiles[this._currentProfile][2]===this._profiles[this._currentProfile][0]?(e=r.AWTEventPriority.Low,this._timerCount=0):this._timerCount*this._profiles[this._currentProfile][2]===this._profiles[this._currentProfile][1]&&(e=r.AWTEventPriority.Normal),this._eventHandler.sendEventsForPriorityAndAbove(e),this._timeout=-1,this.scheduleTimer()},e._initializeProfiles=function(){this._profiles={},this._profiles[i.AWT_REAL_TIME]=[4,2,1],this._profiles[i.AWT_NEAR_REAL_TIME]=[12,6,3],this._profiles[i.AWT_BEST_EFFORT]=[36,18,9]},e._newEventsAllowed=!1,e._currentProfile=i.AWT_REAL_TIME,e._timeout=-1,e._currentBackoffCount=0,e._paused=!1,e._timerCount=0,e._lastUploadNowCall=0,e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.addNotificationListener=function(e){this.listeners.push(e)},e.removeNotificationListener=function(e){for(var t=this.listeners.indexOf(e);t>-1;)this.listeners.splice(t,1),t=this.listeners.indexOf(e)},e.eventsSent=function(e){for(var t=this,n=function(n){i.listeners[n].eventsSent&&setTimeout((function(){return t.listeners[n].eventsSent(e)}),0)},i=this,r=0;r<this.listeners.length;++r)n(r)},e.eventsDropped=function(e,t){for(var n=this,i=function(i){r.listeners[i].eventsDropped&&setTimeout((function(){return n.listeners[i].eventsDropped(e,t)}),0)},r=this,o=0;o<this.listeners.length;++o)i(o)},e.eventsRetrying=function(e){for(var t=this,n=function(n){i.listeners[n].eventsRetrying&&setTimeout((function(){return t.listeners[n].eventsRetrying(e)}),0)},i=this,r=0;r<this.listeners.length;++r)n(r)},e.eventsRejected=function(e,t){for(var n=this,i=function(i){r.listeners[i].eventsRejected&&setTimeout((function(){return n.listeners[i].eventsRejected(e,t)}),0)},r=this,o=0;o<this.listeners.length;++o)i(o)},e.listeners=[],e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Unknown=0]="Unknown",e[e.MSACID=1]="MSACID",e[e.MSAPUID=2]="MSAPUID",e[e.ANID=3]="ANID",e[e.OrgIdCID=4]="OrgIdCID",e[e.OrgIdPUID=5]="OrgIdPUID",e[e.UserObjectId=6]="UserObjectId",e[e.Skype=7]="Skype",e[e.Yammer=8]="Yammer",e[e.EmailAddress=9]="EmailAddress",e[e.PhoneNumber=10]="PhoneNumber",e[e.SipAddress=11]="SipAddress",e[e.MUID=12]="MUID"}(t.AWTUserIdType||(t.AWTUserIdType={})),function(e){e[e.Started=0]="Started",e[e.Ended=1]="Ended"}(t.AWTSessionState||(t.AWTSessionState={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n(0),o=function(){function e(e){this._event={name:"",properties:{}},e&&this.setName(e)}return e.prototype.setName=function(e){this._event.name=e},e.prototype.getName=function(){return this._event.name},e.prototype.setType=function(e){this._event.type=e},e.prototype.getType=function(){return this._event.type},e.prototype.setTimestamp=function(e){this._event.timestamp=e},e.prototype.getTimestamp=function(){return this._event.timestamp},e.prototype.setEventPriority=function(e){this._event.priority=e},e.prototype.getEventPriority=function(){return this._event.priority},e.prototype.setProperty=function(e,t,n){void 0===n&&(n=r.AWTPropertyType.Unspecified);var o={value:t,type:n,pii:r.AWTPiiKind.NotSet,cc:r.AWTCustomerContentKind.NotSet};null!==(o=i.sanitizeProperty(e,o))?this._event.properties[e]=o:delete this._event.properties[e]},e.prototype.setPropertyWithPii=function(e,t,n,o){void 0===o&&(o=r.AWTPropertyType.Unspecified);var s={value:t,type:o,pii:n,cc:r.AWTCustomerContentKind.NotSet};null!==(s=i.sanitizeProperty(e,s))?this._event.properties[e]=s:delete this._event.properties[e]},e.prototype.setPropertyWithCustomerContent=function(e,t,n,o){void 0===o&&(o=r.AWTPropertyType.Unspecified);var s={value:t,type:o,pii:r.AWTPiiKind.NotSet,cc:n};null!==(s=i.sanitizeProperty(e,s))?this._event.properties[e]=s:delete this._event.properties[e]},e.prototype.getPropertyMap=function(){return this._event.properties},e.prototype.getEvent=function(){return this._event},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.low=0,this.high=0,this.low=parseInt(e,10),this.low<0&&(this.high=-1)}return e.prototype._Equals=function(t){var n=new e(t);return this.low===n.low&&this.high===n.high},e}();t.Int64=i;var r=function(){function e(e){this.low=0,this.high=0,this.low=parseInt(e,10)}return e.prototype._Equals=function(t){var n=new e(t);return this.low===n.low&&this.high===n.high},e}();t.UInt64=r;var o=function(){function e(){}return e._ToByte=function(e){return this._ToUInt8(e)},e._ToUInt8=function(e){return 255&e},e._ToInt32=function(e){return 2147483647&e|2147483648&e},e._ToUInt32=function(e){return 4294967295&e},e}();t.Number=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),r=n(0),o=n(6),s=function(){function e(e,t){this._allowDeviceFields=e,this._properties=t}return e.prototype.setAppId=function(e){this._addContext("AppInfo.Id",e)},e.prototype.setAppVersion=function(e){this._addContext("AppInfo.Version",e)},e.prototype.setAppLanguage=function(e){this._addContext("AppInfo.Language",e)},e.prototype.setDeviceId=function(e){this._allowDeviceFields&&(i.default.checkAndSaveDeviceId(e),this._addContext("DeviceInfo.Id",e))},e.prototype.setDeviceOsName=function(e){this._allowDeviceFields&&this._addContext("DeviceInfo.OsName",e)},e.prototype.setDeviceOsVersion=function(e){this._allowDeviceFields&&this._addContext("DeviceInfo.OsVersion",e)},e.prototype.setDeviceBrowserName=function(e){this._allowDeviceFields&&this._addContext("DeviceInfo.BrowserName",e)},e.prototype.setDeviceBrowserVersion=function(e){this._allowDeviceFields&&this._addContext("DeviceInfo.BrowserVersion",e)},e.prototype.setDeviceMake=function(e){this._allowDeviceFields&&this._addContext("DeviceInfo.Make",e)},e.prototype.setDeviceModel=function(e){this._allowDeviceFields&&this._addContext("DeviceInfo.Model",e)},e.prototype.setUserId=function(e,t,n){if(!isNaN(n)&&null!==n&&n>=0&&n<=12)this._addContext("UserInfo.IdType",n.toString());else{var i=void 0;switch(t){case r.AWTPiiKind.SipAddress:i=o.AWTUserIdType.SipAddress;break;case r.AWTPiiKind.PhoneNumber:i=o.AWTUserIdType.PhoneNumber;break;case r.AWTPiiKind.SmtpAddress:i=o.AWTUserIdType.EmailAddress;break;default:i=o.AWTUserIdType.Unknown}this._addContext("UserInfo.IdType",i.toString())}if(isNaN(t)||null===t||t===r.AWTPiiKind.NotSet||t>13)switch(n){case o.AWTUserIdType.Skype:t=r.AWTPiiKind.Identity;break;case o.AWTUserIdType.EmailAddress:t=r.AWTPiiKind.SmtpAddress;break;case o.AWTUserIdType.PhoneNumber:t=r.AWTPiiKind.PhoneNumber;break;case o.AWTUserIdType.SipAddress:t=r.AWTPiiKind.SipAddress;break;default:t=r.AWTPiiKind.NotSet}this._addContextWithPii("UserInfo.Id",e,t)},e.prototype.setUserAdvertisingId=function(e){this._addContext("UserInfo.AdvertisingId",e)},e.prototype.setUserTimeZone=function(e){this._addContext("UserInfo.TimeZone",e)},e.prototype.setUserLanguage=function(e){this._addContext("UserInfo.Language",e)},e.prototype._addContext=function(e,t){"string"==typeof t&&this._properties.setProperty(e,t)},e.prototype._addContextWithPii=function(e,t,n){"string"==typeof t&&this._properties.setPropertyWithPii(e,t,n)},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r="MicrosoftApplicationsTelemetryDeviceId",o="MicrosoftApplicationsTelemetryFirstLaunchTime",s="MSIE",a="Chrome",u="Firefox",c="Safari",l="Edge",d="Electron",p="SkypeShell",f="PhantomJS",_="Opera",h="Windows",v="Mac OS X",y="Windows Phone",g="Windows RT",T="iOS",m="Android",S="Linux",A="Chrome OS",E=/(windows|win32)/i,P=/ arm;/i,I=/windows\sphone\s\d+\.\d+/i,W=/(macintosh|mac os x)/i,b=/(iPad|iPhone|iPod)(?=.*like Mac OS X)/i,w=/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,C=/android/i,B=/CrOS/i,O={5.1:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1","10.0":"10"},k=function(){function e(){}return e.addPropertyStorageOverride=function(e){return!!e&&(this._propertyStorage=e,!0)},e.autoCollect=function(e,t,n){if(this._semanticContext=e,this._disableCookies=t,this._autoCollect(),n||"undefined"==typeof navigator||(n=navigator.userAgent||""),this._autoCollectFromUserAgent(n),this._disableCookies&&!this._propertyStorage)return this._deleteCookie(r),void this._deleteCookie(o);(this._propertyStorage||this._areCookiesAvailable&&!this._disableCookies)&&this._autoCollectDeviceId()},e.checkAndSaveDeviceId=function(e){if(e){var t=this._getData(r),n=this._getData(o);t!==e&&(n=i.getISOString(new Date)),this._saveData(r,e),this._saveData(o,n),this._setFirstLaunchTime(n)}},e._autoCollectDeviceId=function(){var e=this._getData(r);e||(e=i.newGuid()),this._semanticContext.setDeviceId(e)},e._autoCollect=function(){"undefined"!=typeof document&&document.documentElement&&this._semanticContext.setAppLanguage(document.documentElement.lang),"undefined"!=typeof navigator&&this._semanticContext.setUserLanguage(navigator.userLanguage||navigator.language);var e=(new Date).getTimezoneOffset(),t=e%60,n=(e-t)/60,i="+";n>0&&(i="-"),n=Math.abs(n),t=Math.abs(t),this._semanticContext.setUserTimeZone(i+(n<10?"0"+n:n.toString())+":"+(t<10?"0"+t:t.toString()))},e._autoCollectFromUserAgent=function(e){if(e){var t=this._getBrowserName(e);this._semanticContext.setDeviceBrowserName(t),this._semanticContext.setDeviceBrowserVersion(this._getBrowserVersion(e,t));var n=this._getOsName(e);this._semanticContext.setDeviceOsName(n),this._semanticContext.setDeviceOsVersion(this._getOsVersion(e,n))}},e._getBrowserName=function(e){return this._userAgentContainsString("OPR/",e)?_:this._userAgentContainsString(f,e)?f:this._userAgentContainsString(l,e)||this._userAgentContainsString("Edg",e)?l:this._userAgentContainsString(d,e)?d:this._userAgentContainsString(a,e)?a:this._userAgentContainsString("Trident",e)?s:this._userAgentContainsString(u,e)?u:this._userAgentContainsString(c,e)?c:this._userAgentContainsString(p,e)?p:"Unknown"},e._setFirstLaunchTime=function(e){if(!isNaN(e)){var t=new Date;t.setTime(parseInt(e,10)),e=i.getISOString(t)}this.firstLaunchTime=e},e._userAgentContainsString=function(e,t){return t.indexOf(e)>-1},e._getBrowserVersion=function(e,t){if(t===s)return this._getIeVersion(e);if(t===l){var n=this._getOtherVersion(t,e);return"Unknown"===n?this._getOtherVersion("Edg",e):n}return this._getOtherVersion(t,e)},e._getIeVersion=function(e){var t=e.match(new RegExp(s+" ([\\d,.]+)"));if(t)return t[1];var n=e.match(new RegExp("rv:([\\d,.]+)"));return n?n[1]:void 0},e._getOtherVersion=function(e,t){e===c&&(e="Version");var n=t.match(new RegExp(e+"/([\\d,.]+)"));return n?n[1]:"Unknown"},e._getOsName=function(e){return e.match(I)?y:e.match(P)?g:e.match(b)?T:e.match(C)?m:e.match(w)?S:e.match(W)?v:e.match(E)?h:e.match(B)?A:"Unknown"},e._getOsVersion=function(e,t){return t===h?this._getGenericOsVersion(e,"Windows NT"):t===m?this._getGenericOsVersion(e,t):t===v?this._getMacOsxVersion(e):"Unknown"},e._getGenericOsVersion=function(e,t){var n=e.match(new RegExp(t+" ([\\d,.]+)"));return n?O[n[1]]?O[n[1]]:n[1]:"Unknown"},e._getMacOsxVersion=function(e){var t=e.match(new RegExp(v+" ([\\d,_,.]+)"));if(t){var n=t[1].replace(/_/g,".");if(n){var i=this._getDelimiter(n);return i?n.split(i)[0]:n}}return"Unknown"},e._getDelimiter=function(e){return e.indexOf(".")>-1?".":e.indexOf("_")>-1?"_":null},e._saveData=function(e,t){if(this._propertyStorage)this._propertyStorage.setProperty(e,t);else if(this._areCookiesAvailable){var n=new Date;n.setTime(n.getTime()+31536e6);var i="expires="+n.toUTCString();document.cookie=e+"="+t+"; "+i}},e._getData=function(e){if(this._propertyStorage)return this._propertyStorage.getProperty(e)||"";if(this._areCookiesAvailable){e+="=";for(var t=document.cookie.split(";"),n=0;n<t.length;n++){for(var i=t[n],r=0;" "===i.charAt(r);)r++;if(0===(i=i.substring(r)).indexOf(e))return i.substring(e.length,i.length)}}return""},e._deleteCookie=function(e){this._areCookiesAvailable&&(document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},e._disableCookies=!1,e._areCookiesAvailable="undefined"!=typeof document&&void 0!==document.cookie,e}();t.default=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(19),o=n(4),s=n(29),a=n(5),u=n(3),c=function(){function e(e,t,n,o){this._queueSizeLimit=t,this._isCurrentlyUploadingNow=!1,this._uploadNowQueue=[],this._shouldDropEventsOnPause=!1,this._paused=!1,this._queueSize=0,this._outboundQueue=[],this._inboundQueues={},this._inboundQueues[i.AWTEventPriority.High]=[],this._inboundQueues[i.AWTEventPriority.Normal]=[],this._inboundQueues[i.AWTEventPriority.Low]=[],this._addEmptyQueues(),this._batcher=new s.default(this._outboundQueue,500),this._httpManager=new r.default(this._outboundQueue,e,this,n,o)}return e.prototype.addEvent=function(e){u.isPriority(e.priority)||(e.priority=i.AWTEventPriority.Normal),e.priority===i.AWTEventPriority.Immediate_sync?this._httpManager.sendSynchronousRequest(this._batcher.addEventToBatch(e),e.apiKey):this._queueSize<this._queueSizeLimit||this._dropEventWithPriorityOrLess(e.priority)?this._addEventToProperQueue(e):a.default.eventsDropped([e],i.AWTEventsDroppedReason.QueueFull)},e.prototype.sendEventsForPriorityAndAbove=function(e){this._batchEvents(e),this._httpManager.sendQueuedRequests()},e.prototype.hasEvents=function(){return(this._inboundQueues[i.AWTEventPriority.High][0].length>0||this._inboundQueues[i.AWTEventPriority.Normal][0].length>0||this._inboundQueues[i.AWTEventPriority.Low][0].length>0||this._batcher.hasBatch())&&this._httpManager.hasIdleConnection()},e.prototype.addBackRequest=function(e){if(!this._paused||!this._shouldDropEventsOnPause){for(var t in e)if(e.hasOwnProperty(t))for(var n=0;n<e[t].length;++n)e[t][n].sendAttempt<6?this.addEvent(e[t][n]):a.default.eventsDropped([e[t][n]],i.AWTEventsDroppedReason.MaxRetryLimit);o.default.scheduleTimer()}},e.prototype.teardown=function(){this._paused||(this._batchEvents(i.AWTEventPriority.Low),this._httpManager.teardown())},e.prototype.uploadNow=function(e){var t=this;this._addEmptyQueues(),this._isCurrentlyUploadingNow?this._uploadNowQueue.push(e):(this._isCurrentlyUploadingNow=!0,setTimeout((function(){return t._uploadNow(e)}),0))},e.prototype.pauseTransmission=function(){this._paused=!0,this._httpManager.pause(),this._shouldDropEventsOnPause&&(this._queueSize-=this._inboundQueues[i.AWTEventPriority.High][0].length+this._inboundQueues[i.AWTEventPriority.Normal][0].length+this._inboundQueues[i.AWTEventPriority.Low][0].length,this._inboundQueues[i.AWTEventPriority.High][0]=[],this._inboundQueues[i.AWTEventPriority.Normal][0]=[],this._inboundQueues[i.AWTEventPriority.Low][0]=[],this._httpManager.removeQueuedRequests())},e.prototype.resumeTransmission=function(){this._paused=!1,this._httpManager.resume()},e.prototype.shouldDropEventsOnPause=function(e){this._shouldDropEventsOnPause=e},e.prototype._removeFirstQueues=function(){this._inboundQueues[i.AWTEventPriority.High].shift(),this._inboundQueues[i.AWTEventPriority.Normal].shift(),this._inboundQueues[i.AWTEventPriority.Low].shift()},e.prototype._addEmptyQueues=function(){this._inboundQueues[i.AWTEventPriority.High].push([]),this._inboundQueues[i.AWTEventPriority.Normal].push([]),this._inboundQueues[i.AWTEventPriority.Low].push([])},e.prototype._addEventToProperQueue=function(e){this._paused&&this._shouldDropEventsOnPause||(this._queueSize++,this._inboundQueues[e.priority][this._inboundQueues[e.priority].length-1].push(e))},e.prototype._dropEventWithPriorityOrLess=function(e){for(var t=i.AWTEventPriority.Low;t<=e;){if(this._inboundQueues[t][this._inboundQueues[t].length-1].length>0)return a.default.eventsDropped([this._inboundQueues[t][this._inboundQueues[t].length-1].shift()],i.AWTEventsDroppedReason.QueueFull),!0;t++}return!1},e.prototype._batchEvents=function(e){for(var t=i.AWTEventPriority.High;t>=e;){for(;this._inboundQueues[t][0].length>0;){var n=this._inboundQueues[t][0].pop();this._queueSize--,this._batcher.addEventToBatch(n)}t--}this._batcher.flushBatch()},e.prototype._uploadNow=function(e){var t=this;this.hasEvents()&&this.sendEventsForPriorityAndAbove(i.AWTEventPriority.Low),this._checkOutboundQueueEmptyAndSent((function(){t._removeFirstQueues(),null!=e&&e(),t._uploadNowQueue.length>0?setTimeout((function(){return t._uploadNow(t._uploadNowQueue.shift())}),0):(t._isCurrentlyUploadingNow=!1,t.hasEvents()&&o.default.scheduleTimer())}))},e.prototype._checkOutboundQueueEmptyAndSent=function(e){var t=this;this._httpManager.isCompletelyIdle()?e():setTimeout((function(){return t._checkOutboundQueueEmptyAndSent(e)}),250)},e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AWT_REAL_TIME="REAL_TIME",t.AWT_NEAR_REAL_TIME="NEAR_REAL_TIME",t.AWT_BEST_EFFORT="BEST_EFFORT"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(6),o=n(7),s=n(3),a=n(14),u=n(5),c=n(4),l=n(18),d=n(16),p=n(9),f=n(10),_=function(){function e(e){this._apiKey=e,this._contextProperties=new o.default,this._semanticContext=new p.default(!1,this._contextProperties),this._sessionStartTime=0,this._createInitId()}return e.prototype.setContext=function(e,t,n){void 0===n&&(n=i.AWTPropertyType.Unspecified),this._contextProperties.setProperty(e,t,n)},e.prototype.setContextWithPii=function(e,t,n,r){void 0===r&&(r=i.AWTPropertyType.Unspecified),this._contextProperties.setPropertyWithPii(e,t,n,r)},e.prototype.setContextWithCustomerContent=function(e,t,n,r){void 0===r&&(r=i.AWTPropertyType.Unspecified),this._contextProperties.setPropertyWithCustomerContent(e,t,n,r)},e.prototype.getSemanticContext=function(){return this._semanticContext},e.prototype.logEvent=function(t){if(l.default.loggingEnabled){this._apiKey||(this._apiKey=l.default.defaultTenantToken,this._createInitId());var n=!0;s.isString(t)?t={name:t}:t instanceof o.default&&(t=t.getEvent(),n=!1),a.default.eventReceived(this._apiKey),e._logEvent(e._getInternalEvent(t,this._apiKey,n),this._contextProperties)}},e.prototype.logSession=function(t,n){if(l.default.sessionEnabled){var o={name:"session",type:"session",properties:{}};if(e._addPropertiesToEvent(o,n),o.priority=i.AWTEventPriority.High,t===r.AWTSessionState.Started){if(this._sessionStartTime>0)return;this._sessionStartTime=(new Date).getTime(),this._sessionId=s.newGuid(),this.setContext("Session.Id",this._sessionId),o.properties["Session.State"]="Started"}else{if(t!==r.AWTSessionState.Ended)return;if(0===this._sessionStartTime)return;var a=Math.floor(((new Date).getTime()-this._sessionStartTime)/1e3);o.properties["Session.Id"]=this._sessionId,o.properties["Session.State"]="Ended",o.properties["Session.Duration"]=a.toString(),o.properties["Session.DurationBucket"]=e._getSessionDurationFromTime(a),this._sessionStartTime=0,this.setContext("Session.Id",null),this._sessionId=void 0}o.properties["Session.FirstLaunchTime"]=f.default.firstLaunchTime,this.logEvent(o)}},e.prototype.getSessionId=function(){return this._sessionId},e.prototype.logFailure=function(t,n,r,o,s){if(t&&n){var a={name:"failure",type:"failure",properties:{}};e._addPropertiesToEvent(a,s),a.properties["Failure.Signature"]=t,a.properties["Failure.Detail"]=n,r&&(a.properties["Failure.Category"]=r),o&&(a.properties["Failure.Id"]=o),a.priority=i.AWTEventPriority.High,this.logEvent(a)}},e.prototype.logPageView=function(t,n,i,r,o,s){if(t&&n){var a={name:"pageview",type:"pageview",properties:{}};e._addPropertiesToEvent(a,s),a.properties["PageView.Id"]=t,a.properties["PageView.Name"]=n,i&&(a.properties["PageView.Category"]=i),r&&(a.properties["PageView.Uri"]=r),o&&(a.properties["PageView.ReferrerUri"]=o),this.logEvent(a)}},e.prototype._createInitId=function(){!e._initIdMap[this._apiKey]&&this._apiKey&&(e._initIdMap[this._apiKey]=s.newGuid())},e._addPropertiesToEvent=function(e,t){if(t)for(var n in t instanceof o.default&&(t=t.getEvent()),t.name&&(e.name=t.name),t.priority&&(e.priority=t.priority),t.properties)t.properties.hasOwnProperty(n)&&(e.properties[n]=t.properties[n])},e._getSessionDurationFromTime=function(e){return e<0?"Undefined":e<=3?"UpTo3Sec":e<=10?"UpTo10Sec":e<=30?"UpTo30Sec":e<=60?"UpTo60Sec":e<=180?"UpTo3Min":e<=600?"UpTo10Min":e<=1800?"UpTo30Min":"Above30Min"},e._logEvent=function(e,t){e.name&&s.isString(e.name)?(e.name=e.name.toLowerCase(),e.name=e.name.replace(s.EventNameDotRegex,"_"),e.type&&s.isString(e.type)?e.type=e.type.toLowerCase():e.type="custom",s.EventNameAndTypeRegex.test(e.name)&&s.EventNameAndTypeRegex.test(e.type)?((!s.isNumber(e.timestamp)||e.timestamp<0)&&(e.timestamp=(new Date).getTime()),e.properties||(e.properties={}),this._addContextIfAbsent(e,t.getPropertyMap()),this._addContextIfAbsent(e,l.default.logManagerContext.getPropertyMap()),this._setDefaultProperty(e,"EventInfo.InitId",this._getInitId(e.apiKey)),this._setDefaultProperty(e,"EventInfo.Sequence",this._getSequenceId(e.apiKey)),this._setDefaultProperty(e,"EventInfo.SdkVersion",d.FullVersionString),this._setDefaultProperty(e,"EventInfo.Name",e.name),this._setDefaultProperty(e,"EventInfo.Time",new Date(e.timestamp).toISOString()),s.isPriority(e.priority)||(e.priority=i.AWTEventPriority.Normal),this._sendEvent(e)):u.default.eventsRejected([e],i.AWTEventsRejectedReason.InvalidEvent)):u.default.eventsRejected([e],i.AWTEventsRejectedReason.InvalidEvent)},e._addContextIfAbsent=function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e.properties[n]||(e.properties[n]=t[n]))},e._setDefaultProperty=function(e,t,n){e.properties[t]={value:n,pii:i.AWTPiiKind.NotSet,type:i.AWTPropertyType.String}},e._sendEvent=function(e){c.default.sendEvent(e)},e._getInternalEvent=function(e,t,n){if(e.properties=e.properties||{},n)for(var i in e.properties)e.properties.hasOwnProperty(i)&&(e.properties[i]=s.sanitizeProperty(i,e.properties[i]),null===e.properties[i]&&delete e.properties[i]);var r=e;return r.id=s.newGuid(),r.apiKey=t,r},e._getInitId=function(t){return e._initIdMap[t]},e._getSequenceId=function(t){return void 0===e._sequenceIdMap[t]&&(e._sequenceIdMap[t]=0),(++e._sequenceIdMap[t]).toString()},e._sequenceIdMap={},e._initIdMap={},e}();t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n(5),o=n(0),s=function(){function e(){}return e.initialize=function(e){var t=this;this._sendStats=e,this._isInitalized=!0,r.default.addNotificationListener({eventsSent:function(e){t._addStat("records_sent_count",e.length,e[0].apiKey)},eventsDropped:function(e,n){switch(n){case o.AWTEventsDroppedReason.NonRetryableStatus:t._addStat("d_send_fail",e.length,e[0].apiKey),t._addStat("records_dropped_count",e.length,e[0].apiKey);break;case o.AWTEventsDroppedReason.MaxRetryLimit:t._addStat("d_retry_limit",e.length,e[0].apiKey),t._addStat("records_dropped_count",e.length,e[0].apiKey);break;case o.AWTEventsDroppedReason.QueueFull:t._addStat("d_queue_full",e.length,e[0].apiKey)}},eventsRejected:function(e,n){switch(n){case o.AWTEventsRejectedReason.InvalidEvent:t._addStat("r_inv",e.length,e[0].apiKey);break;case o.AWTEventsRejectedReason.KillSwitch:t._addStat("r_kl",e.length,e[0].apiKey);break;case o.AWTEventsRejectedReason.SizeLimitExceeded:t._addStat("r_size",e.length,e[0].apiKey)}t._addStat("r_count",e.length,e[0].apiKey)},eventsRetrying:null}),setTimeout((function(){return t.flush()}),6e4)},e.teardown=function(){this._isInitalized&&(this.flush(),this._isInitalized=!1)},e.eventReceived=function(t){e._addStat("records_received_count",1,t)},e.flush=function(){var e=this;if(this._isInitalized){for(var t in this._stats)this._stats.hasOwnProperty(t)&&this._sendStats(this._stats[t],t);this._stats={},setTimeout((function(){return e.flush()}),6e4)}},e._addStat=function(e,t,n){if(this._isInitalized&&n!==i.StatsApiKey){var r=i.getTenantId(n);this._stats[r]||(this._stats[r]={}),this._stats[r][e]?this._stats[r][e]=this._stats[r][e]+t:this._stats[r][e]=t}},e._isInitalized=!1,e._stats={},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),r=n(0),o=n(5),s=n(3),a=function(){function e(){}return e.getPayloadBlob=function(e,t){var n,a=!1,u=new i.IO.MemoryStream,c=new i.CompactBinaryProtocolWriter(u);for(var l in c._WriteFieldBegin(i._BondDataType._BT_MAP,3,null),c._WriteMapContainerBegin(t,i._BondDataType._BT_STRING,i._BondDataType._BT_LIST),e)if(a)n||(n={}),n[l]=e[l],delete e[l];else if(e.hasOwnProperty(l)){c._WriteString(l);var d=e[l];c._WriteContainerBegin(1,i._BondDataType._BT_STRUCT),c._WriteFieldBegin(i._BondDataType._BT_STRING,2,null),c._WriteString("act_default_source"),c._WriteFieldBegin(i._BondDataType._BT_STRING,5,null),c._WriteString(s.newGuid()),c._WriteFieldBegin(i._BondDataType._BT_INT64,6,null),c._WriteInt64(s.numberToBondInt64(Date.now())),c._WriteFieldBegin(i._BondDataType._BT_LIST,8,null);var p=u._GetBuffer().length+1;c._WriteContainerBegin(e[l].length,i._BondDataType._BT_STRUCT);for(var f=u._GetBuffer().length-p,_=0;_<d.length;++_){var h=u._GetBuffer().length;if(this.writeEvent(d[_],c),u._GetBuffer().length-h>2936012)o.default.eventsRejected([d[_]],r.AWTEventsRejectedReason.SizeLimitExceeded),d.splice(_--,1),u._GetBuffer().splice(h),this._addNewDataPackageSize(d.length,u,f,p);else if(u._GetBuffer().length>2936012){u._GetBuffer().splice(h),n||(n={}),e[l]=d.splice(0,_),n[l]=d,this._addNewDataPackageSize(e[l].length,u,f,p),a=!0;break}}c._WriteStructEnd(!1)}return c._WriteStructEnd(!1),{payloadBlob:u._GetBuffer(),remainingRequest:n}},e._addNewDataPackageSize=function(e,t,n,r){for(var o=i._Encoding._Varint_GetBytes(i.Number._ToUInt32(e)),s=0;s<n;++s){if(!(s<o.length)){t._GetBuffer().slice(r+s,n-s);break}t._GetBuffer()[r+s]=o[s]}},e.writeEvent=function(e,t){t._WriteFieldBegin(i._BondDataType._BT_STRING,1,null),t._WriteString(e.id),t._WriteFieldBegin(i._BondDataType._BT_INT64,3,null),t._WriteInt64(s.numberToBondInt64(e.timestamp)),t._WriteFieldBegin(i._BondDataType._BT_STRING,5,null),t._WriteString(e.type),t._WriteFieldBegin(i._BondDataType._BT_STRING,6,null),t._WriteString(e.name);var n={},o=0,a={},u=0,c={},l=0,d={},p=0,f={},_=0,h={},v=0,y={},g=0;for(var T in e.properties){if(e.properties.hasOwnProperty(T))if((S=e.properties[T]).cc>0)y[T]=S,g++;else if(S.pii>0)h[T]=S,v++;else switch(S.type){case r.AWTPropertyType.String:n[T]=S.value,o++;break;case r.AWTPropertyType.Int64:a[T]=S.value,u++;break;case r.AWTPropertyType.Double:c[T]=S.value,l++;break;case r.AWTPropertyType.Boolean:d[T]=S.value,p++;break;case r.AWTPropertyType.Date:f[T]=S.value,_++}}if(o)for(var T in t._WriteFieldBegin(i._BondDataType._BT_MAP,13,null),t._WriteMapContainerBegin(o,i._BondDataType._BT_STRING,i._BondDataType._BT_STRING),n)if(n.hasOwnProperty(T)){var m=n[T];t._WriteString(T),t._WriteString(m.toString())}if(v)for(var T in t._WriteFieldBegin(i._BondDataType._BT_MAP,30,null),t._WriteMapContainerBegin(v,i._BondDataType._BT_STRING,i._BondDataType._BT_STRUCT),h)if(h.hasOwnProperty(T)){var S=h[T];t._WriteString(T),t._WriteFieldBegin(i._BondDataType._BT_INT32,1,null),t._WriteInt32(1),t._WriteFieldBegin(i._BondDataType._BT_INT32,2,null),t._WriteInt32(S.pii),t._WriteFieldBegin(i._BondDataType._BT_STRING,3,null),t._WriteString(S.value.toString()),t._WriteStructEnd(!1)}if(p)for(var T in t._WriteFieldBegin(i._BondDataType._BT_MAP,31,null),t._WriteMapContainerBegin(p,i._BondDataType._BT_STRING,i._BondDataType._BT_BOOL),d)if(d.hasOwnProperty(T)){m=d[T];t._WriteString(T),t._WriteBool(m)}if(_)for(var T in t._WriteFieldBegin(i._BondDataType._BT_MAP,32,null),t._WriteMapContainerBegin(_,i._BondDataType._BT_STRING,i._BondDataType._BT_INT64),f)if(f.hasOwnProperty(T)){m=f[T];t._WriteString(T),t._WriteInt64(s.numberToBondInt64(m))}if(u)for(var T in t._WriteFieldBegin(i._BondDataType._BT_MAP,33,null),t._WriteMapContainerBegin(u,i._BondDataType._BT_STRING,i._BondDataType._BT_INT64),a)if(a.hasOwnProperty(T)){m=a[T];t._WriteString(T),t._WriteInt64(s.numberToBondInt64(m))}if(l)for(var T in t._WriteFieldBegin(i._BondDataType._BT_MAP,34,null),t._WriteMapContainerBegin(l,i._BondDataType._BT_STRING,i._BondDataType._BT_DOUBLE),c)if(c.hasOwnProperty(T)){m=c[T];t._WriteString(T),t._WriteDouble(m)}if(g)for(var T in t._WriteFieldBegin(i._BondDataType._BT_MAP,36,null),t._WriteMapContainerBegin(g,i._BondDataType._BT_STRING,i._BondDataType._BT_STRUCT),y)if(y.hasOwnProperty(T)){S=y[T];t._WriteString(T),t._WriteFieldBegin(i._BondDataType._BT_INT32,1,null),t._WriteInt32(S.cc),t._WriteFieldBegin(i._BondDataType._BT_STRING,2,null),t._WriteString(S.value.toString()),t._WriteStructEnd(!1)}t._WriteStructEnd(!1)},e.base64Encode=function(e){return i._Encoding._Base64_GetString(e)},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Version="1.8.7",t.FullVersionString="AWT-Web-JS-"+t.Version},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(6),o=n(18),s=n(13),a=n(4),u=n(5),c=n(10),l=function(){function e(){}return e.initialize=function(e,t){if(void 0===t&&(t={}),!this._isInitialized)return this._isInitialized=!0,o.default.defaultTenantToken=e,this._overrideValuesFromConfig(t),this._config.disableCookiesUsage&&!this._config.propertyStorageOverride&&(o.default.sessionEnabled=!1),c.default.addPropertyStorageOverride(this._config.propertyStorageOverride),c.default.autoCollect(o.default.semanticContext,this._config.disableCookiesUsage,this._config.userAgent),a.default.initialize(this._config),o.default.loggingEnabled=!0,this._config.enableAutoUserSession&&(this.getLogger().logSession(r.AWTSessionState.Started),window.addEventListener("beforeunload",this.flushAndTeardown)),this.getLogger()},e.getSemanticContext=function(){return o.default.semanticContext},e.flush=function(e){this._isInitialized&&!this._isDestroyed&&a.default.flush(e)},e.flushAndTeardown=function(){this._isInitialized&&!this._isDestroyed&&(this._config.enableAutoUserSession&&this.getLogger().logSession(r.AWTSessionState.Ended),a.default.flushAndTeardown(),o.default.loggingEnabled=!1,this._isDestroyed=!0)},e.pauseTransmission=function(){this._isInitialized&&!this._isDestroyed&&a.default.pauseTransmission()},e.resumeTransmision=function(){this._isInitialized&&!this._isDestroyed&&a.default.resumeTransmision()},e.setTransmitProfile=function(e){this._isInitialized&&!this._isDestroyed&&a.default.setTransmitProfile(e)},e.loadTransmitProfiles=function(e){this._isInitialized&&!this._isDestroyed&&a.default.loadTransmitProfiles(e)},e.setContext=function(e,t,n){void 0===n&&(n=i.AWTPropertyType.Unspecified),o.default.logManagerContext.setProperty(e,t,n)},e.setContextWithPii=function(e,t,n,r){void 0===r&&(r=i.AWTPropertyType.Unspecified),o.default.logManagerContext.setPropertyWithPii(e,t,n,r)},e.setContextWithCustomerContent=function(e,t,n,r){void 0===r&&(r=i.AWTPropertyType.Unspecified),o.default.logManagerContext.setPropertyWithCustomerContent(e,t,n,r)},e.getLogger=function(e){var t=e;return t&&t!==o.default.defaultTenantToken||(t=""),this._loggers[t]||(this._loggers[t]=new s.default(t)),this._loggers[t]},e.addNotificationListener=function(e){u.default.addNotificationListener(e)},e.removeNotificationListener=function(e){u.default.removeNotificationListener(e)},e._overrideValuesFromConfig=function(e){e.collectorUri&&(this._config.collectorUri=e.collectorUri),e.cacheMemorySizeLimitInNumberOfEvents>0&&(this._config.cacheMemorySizeLimitInNumberOfEvents=e.cacheMemorySizeLimitInNumberOfEvents),e.httpXHROverride&&e.httpXHROverride.sendPOST&&(this._config.httpXHROverride=e.httpXHROverride),e.propertyStorageOverride&&e.propertyStorageOverride.getProperty&&e.propertyStorageOverride.setProperty&&(this._config.propertyStorageOverride=e.propertyStorageOverride),e.userAgent&&(this._config.userAgent=e.userAgent),e.disableCookiesUsage&&(this._config.disableCookiesUsage=e.disableCookiesUsage),e.canSendStatEvent&&(this._config.canSendStatEvent=e.canSendStatEvent),e.enableAutoUserSession&&"undefined"!=typeof window&&window.addEventListener&&(this._config.enableAutoUserSession=e.enableAutoUserSession),e.clockSkewRefreshDurationInMins>0&&(this._config.clockSkewRefreshDurationInMins=e.clockSkewRefreshDurationInMins)},e._loggers={},e._isInitialized=!1,e._isDestroyed=!1,e._config={collectorUri:"https://browser.pipe.aria.microsoft.com/Collector/3.0/",cacheMemorySizeLimitInNumberOfEvents:1e4,disableCookiesUsage:!1,canSendStatEvent:function(e){return!0},clockSkewRefreshDurationInMins:0},e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=n(9),o=function(){function e(){}return e.logManagerContext=new i.default,e.sessionEnabled=!0,e.loggingEnabled=!1,e.defaultTenantToken="",e.semanticContext=new r.default(!0,e.logManagerContext),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(15),o=n(26),s=n(27),a=n(28),u=n(16),c=n(3),l=n(5),d=n(4),p=function(){function e(e,t,n,i,r){var o=this;this._requestQueue=e,this._queueManager=n,this._httpInterface=i,this._urlString="?qsp=true&content-type=application%2Fbond-compact-binary&client-id=NO_AUTH&sdk-version="+u.FullVersionString,this._killSwitch=new s.default,this._paused=!1,this._useBeacons=!1,this._activeConnections=0,this._clockSkewManager=new a.default(r),c.isUint8ArrayAvailable()||(this._urlString+="&content-encoding=base64"),this._urlString=t+this._urlString,this._httpInterface||(this._useBeacons=!c.isReactNative(),this._httpInterface={sendPOST:function(e,t,n,i,r,s){try{if(c.useFetchRequest())fetch(e,{body:t,method:"POST"}).then((function(e){var t={};e.headers&&e.headers.forEach((function(e,n){t[n]=e})),r(e.status,t)})).catch((function(e){i(0,{})}));else if(c.useXDomainRequest()){var a=new XDomainRequest;a.open("POST",e),a.onload=function(){r(200,null)},a.onerror=function(){i(400,null)},a.ontimeout=function(){n(500,null)},a.send(t)}else{var u=new XMLHttpRequest;u.open("POST",e,!s),u.onload=function(){r(u.status,o._convertAllHeadersToMap(u.getAllResponseHeaders()))},u.onerror=function(){i(u.status,o._convertAllHeadersToMap(u.getAllResponseHeaders()))},u.ontimeout=function(){n(u.status,o._convertAllHeadersToMap(u.getAllResponseHeaders()))},u.send(t)}}catch(e){i(400,null)}}})}return e.prototype.hasIdleConnection=function(){return this._activeConnections<2},e.prototype.sendQueuedRequests=function(){for(;this.hasIdleConnection()&&!this._paused&&this._requestQueue.length>0&&this._clockSkewManager.allowRequestSending();)this._activeConnections++,this._sendRequest(this._requestQueue.shift(),0,!1);this.hasIdleConnection()&&d.default.scheduleTimer()},e.prototype.isCompletelyIdle=function(){return 0===this._activeConnections},e.prototype.teardown=function(){for(;this._requestQueue.length>0;)this._sendRequest(this._requestQueue.shift(),0,!0)},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1,this.sendQueuedRequests()},e.prototype.removeQueuedRequests=function(){this._requestQueue.length=0},e.prototype.sendSynchronousRequest=function(e,t){this._paused&&(e[t][0].priority=i.AWTEventPriority.High),this._activeConnections++,this._sendRequest(e,0,!1,!0)},e.prototype._sendRequest=function(e,t,n,o){var s=this;void 0===o&&(o=!1);try{if(this._paused)return this._activeConnections--,void this._queueManager.addBackRequest(e);var a=0,u="";for(var d in e)e.hasOwnProperty(d)&&(this._killSwitch.isTenantKilled(d)?(l.default.eventsRejected(e[d],i.AWTEventsRejectedReason.KillSwitch),delete e[d]):(u.length>0&&(u+=","),u+=d,a++));if(a>0){var p=r.default.getPayloadBlob(e,a);p.remainingRequest&&this._requestQueue.push(p.remainingRequest);var f=this._urlString+"&x-apikey="+u+"&client-time-epoch-millis="+Date.now().toString();this._clockSkewManager.shouldAddClockSkewHeaders()&&(f=f+"&time-delta-to-apply-millis="+this._clockSkewManager.getClockSkewHeaderValue());var _=void 0;for(var d in _=c.isUint8ArrayAvailable()?new Uint8Array(p.payloadBlob):r.default.base64Encode(p.payloadBlob),e)if(e.hasOwnProperty(d))for(var h=0;h<e[d].length;++h)e[d][h].sendAttempt>0?e[d][h].sendAttempt++:e[d][h].sendAttempt=1;if(this._useBeacons&&n&&c.isBeaconsSupported()&&navigator.sendBeacon(f,_))return;this._httpInterface.sendPOST(f,_,(function(i,r){s._retryRequestIfNeeded(i,r,e,a,u,t,n,o)}),(function(i,r){s._retryRequestIfNeeded(i,r,e,a,u,t,n,o)}),(function(i,r){s._retryRequestIfNeeded(i,r,e,a,u,t,n,o)}),n||o)}else n||this._handleRequestFinished(!1,{},n,o)}catch(e){this._handleRequestFinished(!1,{},n,o)}},e.prototype._retryRequestIfNeeded=function(e,t,n,r,s,a,u,c){var p=this,f=!0;if(void 0!==e){if(t){var _=this._killSwitch.setKillSwitchTenants(t["kill-tokens"],t["kill-duration-seconds"]);this._clockSkewManager.setClockSkew(t["time-delta-millis"]);for(var h=0;h<_.length;++h)l.default.eventsRejected(n[_[h]],i.AWTEventsRejectedReason.KillSwitch),delete n[_[h]],r--}else this._clockSkewManager.setClockSkew(null);if(200===e)return void this._handleRequestFinished(!0,n,u,c);(!o.default.shouldRetryForStatus(e)||r<=0)&&(f=!1)}if(f)if(c)this._activeConnections--,n[s][0].priority=i.AWTEventPriority.High,this._queueManager.addBackRequest(n);else if(a<1){for(var v in n)n.hasOwnProperty(v)&&l.default.eventsRetrying(n[v]);setTimeout((function(){return p._sendRequest(n,a+1,!1)}),o.default.getMillisToBackoffForRetry(a))}else this._activeConnections--,d.default.backOffTransmission(),this._queueManager.addBackRequest(n);else this._handleRequestFinished(!1,n,u,c)},e.prototype._handleRequestFinished=function(e,t,n,r){for(var o in e&&d.default.clearBackOff(),t)t.hasOwnProperty(o)&&(e?l.default.eventsSent(t[o]):l.default.eventsDropped(t[o],i.AWTEventsDroppedReason.NonRetryableStatus));this._activeConnections--,r||n||this.sendQueuedRequests()},e.prototype._convertAllHeadersToMap=function(e){var t={};if(e)for(var n=e.split("\n"),i=0;i<n.length;++i){var r=n[i].split(": ");t[r[0]]=r[1]}return t},e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(21);t._BondDataType=i._BondDataType;var r=n(22);t._Encoding=r;var o=n(25);t.IO=o;var s=n(8);t.Int64=s.Int64,t.UInt64=s.UInt64,t.Number=s.Number;var a=function(){function e(e){this._stream=e}return e.prototype._WriteBlob=function(e){this._stream._Write(e,0,e.length)},e.prototype._WriteBool=function(e){this._stream._WriteByte(e?1:0)},e.prototype._WriteContainerBegin=function(e,t){this._WriteUInt8(t),this._WriteUInt32(e)},e.prototype._WriteMapContainerBegin=function(e,t,n){this._WriteUInt8(t),this._WriteUInt8(n),this._WriteUInt32(e)},e.prototype._WriteDouble=function(e){var t=r._Double_GetBytes(e);this._stream._Write(t,0,t.length)},e.prototype._WriteFieldBegin=function(e,t,n){t<=5?this._stream._WriteByte(e|t<<5):t<=255?(this._stream._WriteByte(192|e),this._stream._WriteByte(t)):(this._stream._WriteByte(224|e),this._stream._WriteByte(t),this._stream._WriteByte(t>>8))},e.prototype._WriteInt32=function(e){e=r._Zigzag_EncodeZigzag32(e),this._WriteUInt32(e)},e.prototype._WriteInt64=function(e){this._WriteUInt64(r._Zigzag_EncodeZigzag64(e))},e.prototype._WriteString=function(e){if(""===e)this._WriteUInt32(0);else{var t=r._Utf8_GetBytes(e);this._WriteUInt32(t.length),this._stream._Write(t,0,t.length)}},e.prototype._WriteStructEnd=function(e){this._WriteUInt8(e?i._BondDataType._BT_STOP_BASE:i._BondDataType._BT_STOP)},e.prototype._WriteUInt32=function(e){var t=r._Varint_GetBytes(s.Number._ToUInt32(e));this._stream._Write(t,0,t.length)},e.prototype._WriteUInt64=function(e){var t=r._Varint64_GetBytes(e);this._stream._Write(t,0,t.length)},e.prototype._WriteUInt8=function(e){this._stream._WriteByte(s.Number._ToUInt8(e))},e}();t.CompactBinaryProtocolWriter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e._BT_STOP=0]="_BT_STOP",e[e._BT_STOP_BASE=1]="_BT_STOP_BASE",e[e._BT_BOOL=2]="_BT_BOOL",e[e._BT_DOUBLE=8]="_BT_DOUBLE",e[e._BT_STRING=9]="_BT_STRING",e[e._BT_STRUCT=10]="_BT_STRUCT",e[e._BT_LIST=11]="_BT_LIST",e[e._BT_MAP=13]="_BT_MAP",e[e._BT_INT32=16]="_BT_INT32",e[e._BT_INT64=17]="_BT_INT64"}(t._BondDataType||(t._BondDataType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),r=n(23),o=n(24);t._Utf8_GetBytes=function(e){for(var t=[],n=0;n<e.length;++n){var i=e.charCodeAt(n);i<128?t.push(i):i<2048?t.push(192|i>>6,128|63&i):i<55296||i>=57344?t.push(224|i>>12,128|i>>6&63,128|63&i):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++n)),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return t},t._Base64_GetString=function(e){for(var t,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=[],r=e.length%3,o=0,s=e.length-r;o<s;o+=3){var a=(e[o]<<16)+(e[o+1]<<8)+e[o+2];i.push([n.charAt((t=a)>>18&63),n.charAt(t>>12&63),n.charAt(t>>6&63),n.charAt(63&t)].join(""))}switch(r){case 1:a=e[e.length-1];i.push(n.charAt(a>>2)),i.push(n.charAt(a<<4&63)),i.push("==");break;case 2:var u=(e[e.length-2]<<8)+e[e.length-1];i.push(n.charAt(u>>10)),i.push(n.charAt(u>>4&63)),i.push(n.charAt(u<<2&63)),i.push("=")}return i.join("")},t._Varint_GetBytes=function(e){for(var t=[];4294967168&e;)t.push(127&e|128),e>>>=7;return t.push(127&e),t},t._Varint64_GetBytes=function(e){for(var t=e.low,n=e.high,i=[];n||4294967168&t;)i.push(127&t|128),t=(127&n)<<25|t>>>7,n>>>=7;return i.push(127&t),i},t._Double_GetBytes=function(e){if(o.BrowserChecker._IsDataViewSupport()){var t=new DataView(new ArrayBuffer(8));t.setFloat64(0,e,!0);for(var n=[],i=0;i<8;++i)n.push(t.getUint8(i));return n}return r.FloatUtils._ConvertNumberToArray(e,!0)},t._Zigzag_EncodeZigzag32=function(e){return(e=i.Number._ToInt32(e))<<1^e>>31},t._Zigzag_EncodeZigzag64=function(e){var t=e.low,n=e.high,r=n<<1|t>>>31,o=t<<1;2147483648&n&&(r=~r,o=~o);var s=new i.UInt64("0");return s.low=o,s.high=r,s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e._ConvertNumberToArray=function(e,t){if(!e)return t?this._doubleZero:this._floatZero;var n=t?52:23,i=(1<<(t?11:8)-1)-1,r=1-i,o=i,s=e<0?1:0;e=Math.abs(e);for(var a=Math.floor(e),u=e-a,c=2*(i+2)+n,l=new Array(c),d=0;d<c;)l[d++]=0;for(d=i+2;d&&a;)l[--d]=a%2,a=Math.floor(a/2);for(d=i+1;d<c-1&&u>0;)(u*=2)>=1?(l[++d]=1,--u):l[++d]=0;for(var p=0;p<c&&!l[p];)p++;var f=i+1-p,_=p+n;if(l[_+1]){for(d=_;d>p&&(l[d]=1-l[d],!l);--d);d===p&&++f}if(f>o||a)return s?t?this._doubleNegInifinity:this._floatNegInifinity:t?this._doubleInifinity:this._floatInifinity;if(f<r)return t?this._doubleZero:this._floatZero;if(t){var h=0;for(d=0;d<20;++d)h=h<<1|l[++p];for(var v=0;d<52;++d)v=v<<1|l[++p];return[255&v,v>>8&255,v>>16&255,v>>>24,255&(h=s<<31|2147483647&(h|=f+i<<20)),h>>8&255,h>>16&255,h>>>24]}var y=0;for(d=0;d<23;++d)y=y<<1|l[++p];return[255&(y=s<<31|2147483647&(y|=f+i<<23)),y>>8&255,y>>16&255,y>>>24]},e._floatZero=[0,0,0,0],e._doubleZero=[0,0,0,0,0,0,0,0],e._floatInifinity=[0,0,128,127],e._floatNegInifinity=[0,0,128,255],e._doubleInifinity=[0,0,0,0,0,0,240,127],e._doubleNegInifinity=[0,0,0,0,0,0,240,255],e}();t.FloatUtils=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e._IsDataViewSupport=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},e}();t.BrowserChecker=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),r=function(){function e(){this._buffer=[]}return e.prototype._WriteByte=function(e){this._buffer.push(i.Number._ToByte(e))},e.prototype._Write=function(e,t,n){for(;n--;)this._WriteByte(e[t++])},e.prototype._GetBuffer=function(){return this._buffer},e}();t.MemoryStream=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.shouldRetryForStatus=function(e){return!(e>=300&&e<500&&408!==e||501===e||505===e)},e.getMillisToBackoffForRetry=function(e){var t,n=Math.floor(1200*Math.random())+2400;return t=Math.pow(4,e)*n,Math.min(t,12e4)},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this._killedTokenDictionary={}}return e.prototype.setKillSwitchTenants=function(e,t){if(e&&t)try{var n=e.split(",");if("this-request-only"===t)return n;for(var i=1e3*parseInt(t,10),r=0;r<n.length;++r)this._killedTokenDictionary[n[r]]=Date.now()+i}catch(e){return[]}return[]},e.prototype.isTenantKilled=function(e){return void 0!==this._killedTokenDictionary[e]&&this._killedTokenDictionary[e]>Date.now()||(delete this._killedTokenDictionary[e],!1)},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.clockSkewRefreshDurationInMins=e,this._reset()}return e.prototype.allowRequestSending=function(){return this._isFirstRequest&&!this._clockSkewSet?(this._isFirstRequest=!1,this._allowRequestSending=!1,!0):this._allowRequestSending},e.prototype.shouldAddClockSkewHeaders=function(){return this._shouldAddClockSkewHeaders},e.prototype.getClockSkewHeaderValue=function(){return this._clockSkewHeaderValue},e.prototype.setClockSkew=function(e){this._clockSkewSet||(e?this._clockSkewHeaderValue=e:this._shouldAddClockSkewHeaders=!1,this._clockSkewSet=!0,this._allowRequestSending=!0)},e.prototype._reset=function(){var e=this;this._isFirstRequest=!0,this._clockSkewSet=!1,this._allowRequestSending=!0,this._shouldAddClockSkewHeaders=!0,this._clockSkewHeaderValue="use-collector-delta",this.clockSkewRefreshDurationInMins>0&&setTimeout((function(){return e._reset()}),6e4*this.clockSkewRefreshDurationInMins)},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(){function e(e,t){this._outboundQueue=e,this._maxNumberOfEvents=t,this._currentBatch={},this._currentNumEventsInBatch=0}return e.prototype.addEventToBatch=function(e){if(e.priority===i.AWTEventPriority.Immediate_sync){var t={};return t[e.apiKey]=[e],t}return this._currentNumEventsInBatch>=this._maxNumberOfEvents&&this.flushBatch(),void 0===this._currentBatch[e.apiKey]&&(this._currentBatch[e.apiKey]=[]),this._currentBatch[e.apiKey].push(e),this._currentNumEventsInBatch++,null},e.prototype.flushBatch=function(){this._currentNumEventsInBatch>0&&(this._outboundQueue.push(this._currentBatch),this._currentBatch={},this._currentNumEventsInBatch=0)},e.prototype.hasBatch=function(){return this._currentNumEventsInBatch>0},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=function(){function e(){}return e.setEventsHandler=function(e){i.default.setEventsHandler(e)},e.getEventsHandler=function(){return i.default.getEventsHandler()},e.scheduleTimer=function(){i.default.scheduleTimer()},e}();t.default=r},function(e,t,n){"use strict";n.r(t),n.d(t,"AgaveSink",(function(){return J})),n.d(t,"TelemetryContext",(function(){return h}));var i,r,o,s,a,u,c,l,d,p=new(function(){function e(){this._listeners=[]}return e.prototype.fireEvent=function(e){this._listeners.forEach((function(t){return t(e)}))},e.prototype.addListener=function(e){e&&this._listeners.push(e)},e.prototype.removeListener=function(e){this._listeners=this._listeners.filter((function(t){return t!==e}))},e.prototype.getListenerCount=function(){return this._listeners.length},e}());function f(e,t,n){p.fireEvent({level:e,category:t,message:n})}function _(e,t,n){f(i.Error,e,(function(){var e=n instanceof Error?n.message:"";return t+": "+e}))}!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose"}(i||(i={})),function(e){e[e.Core=0]="Core",e[e.Sink=1]="Sink",e[e.Transport=2]="Transport"}(r||(r={})),function(e){e[e.NotSet=0]="NotSet",e[e.Measure=1]="Measure",e[e.Diagnostics=2]="Diagnostics",e[e.CriticalBusinessImpact=191]="CriticalBusinessImpact",e[e.CriticalCensus=192]="CriticalCensus",e[e.CriticalExperimentation=193]="CriticalExperimentation",e[e.CriticalUsage=194]="CriticalUsage"}(o||(o={})),function(e){e[e.NotSet=0]="NotSet",e[e.Normal=1]="Normal",e[e.High=2]="High"}(s||(s={})),function(e){e[e.NotSet=0]="NotSet",e[e.Normal=1]="Normal",e[e.High=2]="High"}(a||(a={})),function(e){e[e.NotSet=0]="NotSet",e[e.SoftwareSetup=1]="SoftwareSetup",e[e.ProductServiceUsage=2]="ProductServiceUsage",e[e.ProductServicePerformance=4]="ProductServicePerformance",e[e.DeviceConfiguration=8]="DeviceConfiguration",e[e.InkingTypingSpeech=16]="InkingTypingSpeech"}(u||(u={})),function(e){e[e.ReservedDoNotUse=0]="ReservedDoNotUse",e[e.BasicEvent=10]="BasicEvent",e[e.FullEvent=100]="FullEvent",e[e.NecessaryServiceDataEvent=110]="NecessaryServiceDataEvent",e[e.AlwaysOnNecessaryServiceDataEvent=120]="AlwaysOnNecessaryServiceDataEvent"}(c||(c={})),function(e){e[e.EssentialServiceMetadata=1]="EssentialServiceMetadata",e[e.AccountData=2]="AccountData",e[e.SystemMetadata=4]="SystemMetadata",e[e.OrganizationIdentifiableInformation=8]="OrganizationIdentifiableInformation",e[e.EndUserIdentifiableInformation=16]="EndUserIdentifiableInformation",e[e.CustomerContent=32]="CustomerContent",e[e.AccessControl=64]="AccessControl"}(l||(l={})),function(e){e[e.String=0]="String",e[e.Boolean=1]="Boolean",e[e.Int64=2]="Int64",e[e.Double=3]="Double",e[e.Guid=4]="Guid"}(d||(d={}));var h=function(){function e(){}return e.setTelemetryContext=function(e){this._steContext=e},e.getDataFieldsFromContext=function(){var e=this,t=[];return Object.keys(this._steContext).forEach((function(n){t.push({name:n,value:e._steContext[n],dataType:d.String})})),t},e.getAppName=function(){return this._steContext["App.Name"]},e.getAppPlatform=function(){return this._steContext["App.Platform"]},e.getAppVersion=function(){return this._steContext["App.Version"]},e.isWacAgave=function(){return"Web"===this._steContext["App.Platform"]},e._steContext={},e}(),v=function(){function e(){this._requestIsPending=!1,this._telemetryQueue=[],this._sentFirstEvent=!1}return e.prototype.isSupportedByDeclaration=function(){return Office.context.requirements.isSetSupported("Telemetry","1.2")},e.prototype.isUnsupported=function(){return h.isWacAgave()||"undefined"==typeof OfficeCore},e.prototype.isSupportedAsync=function(e){(this._sentFirstEvent||void 0!==this._onSentFirstEvent)&&(f(i.Error,r.Sink,(function(){return"isSupportedAsync may only be called once"})),e(!1)),this._onSentFirstEvent=e,this.sendTestEvent()},e.prototype.sendTelemetryEvent=function(e){this._telemetryQueue.push(e),this._requestIsPending||this.processWorkBacklog()},e.prototype.sendTestEvent=function(){var e={telemetryProperties:{nexusTenantToken:1723,ariaTenantToken:"f998cc5ba4d448d6a1e8e913ff18be94-dd122e0a-fcf8-4dc5-9dbb-6afac5325183-7405"},eventName:"Office.Telemetry.RichApi.TestForSupport",eventFlags:{dataCategories:u.ProductServiceUsage,diagnosticLevel:c.FullEvent}};this.sendTelemetryEvent(e)},e.prototype.processWorkBacklog=function(){var e=this;this._requestIsPending=!0;var t=this._telemetryQueue;this._telemetryQueue=[],this.pauseIfNecessary().then((function(){e.processTelemetryEvents(t),e.waitAndProcessMore()})).catch((function(t){_(r.Sink,"RichApiSink Error",t),e.waitAndProcessMore()}))},e.prototype.waitAndProcessMore=function(){var e=this;y(1e3).then((function(){e._telemetryQueue.length>0&&setTimeout((function(){return e.processWorkBacklog()}),0),e._requestIsPending=!1})).catch((function(){}))},e.prototype.processTelemetryEvents=function(e){var t=this,n=new OfficeCore.RequestContext;e.forEach((function(e){if(e.telemetryProperties){var l=[];t.addDataFields(l,e.dataFields);var d=e.eventContract?e.eventContract.name:"";e.eventContract&&t.addDataFields(l,e.eventContract.dataFields),n.telemetry.sendTelemetryEvent(e.telemetryProperties,e.eventName,d,function(e){var t={costPriority:a.Normal,samplingPolicy:o.Measure,persistencePriority:s.Normal,dataCategories:u.NotSet,diagnosticLevel:c.FullEvent};return e.eventFlags&&e.eventFlags.dataCategories||f(i.Error,r.Core,(function(){return"Event is missing DataCategories event flag"})),e.eventFlags?(e.eventFlags.costPriority&&(t.costPriority=e.eventFlags.costPriority),e.eventFlags.samplingPolicy&&(t.samplingPolicy=e.eventFlags.samplingPolicy),e.eventFlags.persistencePriority&&(t.persistencePriority=e.eventFlags.persistencePriority),e.eventFlags.dataCategories&&(t.dataCategories=e.eventFlags.dataCategories),e.eventFlags.diagnosticLevel&&(t.diagnosticLevel=e.eventFlags.diagnosticLevel),t):t}(e),l)}})),this._sentFirstEvent?n.sync().catch((function(e){_(r.Sink,"RichApiError",e)})):(this._sentFirstEvent=!0,n.sync().then((function(){t._onSentFirstEvent&&t._onSentFirstEvent(!0)})).catch((function(){f(i.Info,r.Sink,(function(){return"RichApiTelemetry not supported on the host."})),t._onSentFirstEvent&&t._onSentFirstEvent(!1)})))},e.prototype.addDataFields=function(e,t){t&&t.forEach((function(t){e.push({name:t.name,value:t.value,classification:t.classification?t.classification:l.SystemMetadata,type:t.dataType})}))},e.prototype.pauseIfNecessary=function(){return this._sentFirstEvent?Office.Promise.resolve(void 0):y(1e3)},e}();function y(e){return new Office.Promise((function(t){return setTimeout(t,e)}))}var g=function(){function e(){}return e.prototype.sendTelemetryEvent=function(t){e._richApiHelper.sendTelemetryEvent(t)},e.isSupportedByDeclaration=function(){return this._richApiHelper.isSupportedByDeclaration()},e.isUnsupported=function(){return this._richApiHelper.isUnsupported()},e.isSupportedAsync=function(e){return this._richApiHelper.isSupportedAsync(e)},e._richApiHelper=new v,e}();var T=function(){function e(){}return e.isSupported=function(){return("undefined"!=typeof Office&&void 0!==Office.context&&void 0!==Office.context.platform?Office.context.platform===Office.PlatformType.OfficeOnline:"undefined"!=typeof OfficeExt&&void 0!==OfficeExt.HostName&&void 0!==OfficeExt.HostName.Host&&"function"==typeof OfficeExt.HostName.Host.getInstance&&"function"==typeof OfficeExt.HostName.Host.getInstance().getPlatform&&OfficeExt.HostName.Host.getInstance().getPlatform()===Office.PlatformType.OfficeOnline)&&"object"==typeof OSF&&"function"==typeof OSF.getClientEndPoint&&"object"==typeof OSF._OfficeAppFactory&&"function"==typeof OSF._OfficeAppFactory.getId&&"object"==typeof OSF.AgaveHostAction&&"number"==typeof OSF.AgaveHostAction.SendTelemetryEvent},e.prototype.sendTelemetryEvent=function(e,t){try{if(e.dataFields&&e.dataFields.filter((function(e){return e.classification&&e.classification!==l.SystemMetadata})).length>0)return;var n=OSF._OfficeAppFactory.getId(),i=OSF.AgaveHostAction.SendTelemetryEvent;OSF.getClientEndPoint().invoke("ContextActivationManager_notifyHost",null,[n,i,e])}catch(e){_(r.Sink,"AgaveWacSink",e)}},e}(),m=function(){function e(){this._supportsAllEvents=!1,this._contextDataFields=[],this._supportsAllEvents=Office.context.requirements.isSetSupported("OutlookTelemetry","1.1");var e=h.getAppPlatform();"iOS"!==e&&"Android"!==e||(this._contextDataFields=h.getDataFieldsFromContext())}return e.isSupported=function(){try{return Office.context.requirements.isSetSupported("OutlookTelemetry")}catch(e){return!1}},e.prototype.sendTelemetryEvent=function(e){this._supportsAllEvents||e.eventName.match(/^Office\.Extensibility\.OfficeJs\.[a-zA-Z]*$/)?(this.addAdditionalDataFields(e),Office.context.mailbox.logTelemetry(JSON.stringify(e))):f(i.Info,r.Sink,(function(){return"This version of Outlook only accepts OfficeJS telemetry events"}))},e.prototype.addAdditionalDataFields=function(e){var t;e.dataFields=e.dataFields||[],(t=e.dataFields).push.apply(t,this._contextDataFields)},e}(),S=[16,0,11599],A=[16,0,4266],E=[16,26],P=[2,29],I=[16,0,99999],W=["Excel","Outlook","PowerPoint","Project","Word"],b=!1;function w(){if(!b)return!1;var e=h.getAppPlatform();return function(e,t,n){if(!e)return!0;if(!n||W.indexOf(n)<0)return!1;var i,r=[];if("Win32"===t)i=S,r=A;else if("Mac"===t)i=E;else if("iOS"===t){if("Outlook"===n)return!0;i=P}else{if("Web"!==t||"Outlook"!==n)return!1;i=I}var o=String(e).split(".").map((function(e){return parseInt(e,10)}));return C(r,o)&&C(o,i)}(h.getAppVersion(),e,h.getAppName())}function C(e,t){for(var n=0;n<e.length&&n<t.length;n++){if(isNaN(e[n])||isNaN(t[n]))return!1;if(e[n]<t[n])return!0;if(e[n]>t[n])return!1}return!0}var B=n(1),O=n(0),k=/\./g,D=0;function R(e,t,n){t&&t.forEach((function(t){if(!t.classification||t.classification===l.SystemMetadata||t.classification===l.EssentialServiceMetadata){var i=["","",t.name],r=i[0],o=i[1],s=i[2],a=t.name.indexOf(".");a>0&&"zC"===t.name.substr(0,a)&&(r=t.name.substring(0,a+1),s=t.name.substring(a+1)),n&&(o="Data.");var u=r+o+s;e.properties[u]={value:t.value,type:N(t.dataType)}}}))}function N(e){switch(e){case d.String:case d.Guid:return O.AWTPropertyType.String;case d.Boolean:return O.AWTPropertyType.Boolean;case d.Int64:return O.AWTPropertyType.Int64;case d.Double:return O.AWTPropertyType.Double;default:throw new Error(e)}}var M,x,U,F,L=n(4),q=n.n(L),z=n(11),H=n.n(z);var j={sendRequestWrapper:function(e,t,n,i){void 0===i&&(i=!1);var r=0;for(var o in e)e.hasOwnProperty(o)&&(r+=e[o].length);var s=performance.now();M(e,t,n,i),U(performance.now()-s,r)},sendPostWrapper:function(e,t,n,i,r,o){x(e,t,n,i,r,o),F(t.length)}};var Q=!1;function V(e,t,n){var i;if(G(),!e.telemetryProperties||!e.telemetryProperties.ariaTenantToken)throw new Error("Missing Aria Tenant Token");i=function(e,t,n){var i,r,o={name:(i=e.eventName,i.toLowerCase().replace(k,"_")),properties:{}};return o.properties["Event.Sequence"]={value:++D,type:O.AWTPropertyType.Int64},o.properties["Event.Name"]=e.eventName,o.properties["Event.Source"]="OTelJS",r=n?new Date(n):new Date,o.properties["Event.Time"]={value:r,type:O.AWTPropertyType.Date},e.eventContract&&(o.properties["Event.Contract"]=e.eventContract.name,R(o,e.eventContract.dataFields,!1)),R(o,t,!1),R(o,e.dataFields,!0),o}(e,t,n),B.AWTLogManager.getLogger(e.telemetryProperties.ariaTenantToken).logEvent(i)}function G(e,t){var n;Q||(B.AWTLogManager.initialize("cd836626611c4caaa8fc5b2e728ee81d-3b6d6c45-6377-4bf5-9792-dbf8e1881088-7521",e),t&&(!function(e){if(!e)return;var t=e/1e3,n=t/2,i=2*t,r={};r.OTelCustomTransmissionProfile=[i,t,n],B.AWTLogManager.loadTransmitProfiles(r),B.AWTLogManager.setTransmitProfile("OTelCustomTransmissionProfile")}(t.uploadFrequency),(n=t.notificationListener)&&B.AWTLogManager.addNotificationListener(n),function(e){if(!e)return;(function(e,t){var n=q.a.getEventsHandler();if(!(n instanceof H.a))return!1;var i=n._httpManager;if(!(i&&i._sendRequest&&i._httpInterface))return!1;M=i._sendRequest.bind(i),i._sendRequest=j.sendRequestWrapper;var r=i._httpInterface;return x=r.sendPOST.bind(i),r.sendPOST=j.sendPostWrapper,U=e,F=t,!0})(e.requestProcessingStats,e.networkStats)||f(i.Error,r.Sink,(function(){return"Failed to instrument Aria delivery task"}))}(t.stats),t.disableStatsTracking||B.AWTLogManager.addNotificationListener({eventsSent:function(e){f(i.Info,r.Transport,(function(){return"Successfully sent "+e.length+" event(s)"})),f(i.Verbose,r.Transport,(function(){return"Sent event(s) details : "+JSON.stringify(e,null,2)})),e.length},eventsDropped:function(e,t){f(i.Error,r.Transport,(function(){return"Dropped "+e.length+" event(s) because "+t})),f(i.Verbose,r.Transport,(function(){return"Dropped event(s) details : "+JSON.stringify(e,null,2)})),e.length},eventsRejected:function(e,t){f(i.Error,r.Transport,(function(){return"Rejected "+e.length+" event(s) because "+t})),f(i.Verbose,r.Transport,(function(){return"Rejected event(s) details : "+JSON.stringify(e,null,2)})),e.length},eventsRetrying:function(e){f(i.Warning,r.Transport,(function(){return"Retrying "+e.length+" event(s)"})),f(i.Verbose,r.Transport,(function(){return"Retrying event(s) details : "+JSON.stringify(e,null,2)})),e.length}})),Q=!0)}var K,Z=function(){function e(){this._fullEventsEnabled=!1}return e.prototype.processEvent=function(e){return this._fullEventsEnabled||!!e.eventFlags&&(e.eventFlags.diagnosticLevel===c.BasicEvent||e.eventFlags.diagnosticLevel===c.NecessaryServiceDataEvent||e.eventFlags.diagnosticLevel===c.AlwaysOnNecessaryServiceDataEvent)},e.prototype.setFullEventsEnabled=function(e){this._fullEventsEnabled=e},e}();!function(e){e[e.Aria=0]="Aria",e[e.AriaSE=1]="AriaSE"}(K||(K={}));var X=function(){function e(t,n){if(void 0===t&&(t=[]),this._preprocessors=[],this.additionalDataFields=t,this._fullEventProcessor=new Z,this.addPreprocessor(this._fullEventProcessor),void 0===e.ariaSinkType)e.ariaSinkType=this.getSinkType();else if(e.ariaSinkType!==this.getSinkType())throw new Error("Multiple Aria Configurations are not allowed");G(this.getAWTLogConfiguration(n),n)}return e.prototype.getSinkType=function(){return K.Aria},e.prototype.getAWTLogConfiguration=function(e){var t={disableCookiesUsage:!0,canSendStatEvent:function(){return!1}};return e&&(t.cacheMemorySizeLimitInNumberOfEvents=e.eventsLimitInMem,t.collectorUri=e.endpointUrl),t},e.prototype.sendTelemetryEvent=function(e,t){try{for(var n=0;n<this._preprocessors.length;n++)if(!this._preprocessors[n].processEvent(e))return;V(e,this.additionalDataFields,t)}catch(e){_(r.Sink,"AriaSink",e)}},e.prototype.getAdditionalDataFields=function(){return this.additionalDataFields},e.prototype.addPreprocessor=function(e){this._preprocessors.push(e)},e.prototype.setFullEventsEnabled=function(e){this._fullEventProcessor.setFullEventsEnabled(e)},e.prototype.flushAsync=function(e){B.AWTLogManager.flush(e)},e.prototype.shutdown=function(){B.AWTLogManager.flushAndTeardown()},e}();var J=function(){function e(e,t,n){this._isUsable=!0,this._awaitingInitialization=!1,this._eventQueue=[],this._onReady=n,h.setTelemetryContext(e),b=t,this.initialize()}return e.createInstance=function(t,n){void 0===t&&(t={}),void 0===n&&(n=!0);var i=new e(t,n);if(i._isUsable)return i},e.prototype.initialize=function(){if(!this.isTelemetryEnabled())return this.failToInitialize("AppTelemetry is disabled for this platform.");if(g.isSupportedByDeclaration())this.connectRichApiSink();else if(m.isSupported())this.connectSink("OutlookSink",new m);else if(h.isWacAgave()&&T.isSupported())this.connectSink("SdxWacSink",new T);else if(g.isUnsupported()){if(!w())return this.failToInitialize();this.connectAriaSink()}else this._awaitingInitialization=!0,g.isSupportedAsync(this.onRichApiSupportedAsync.bind(this))},e.prototype.onRichApiSupportedAsync=function(e){var t=this;e?this.connectSink("RichApiSink",new g):w()?this.connectAriaSink():this.failToInitialize(),this._awaitingInitialization=!1,this._eventQueue.forEach((function(e){t.sendTelemetryEvent(e)}))},e.prototype.failToInitialize=function(e){this._isUsable=!1,this._awaitingInitialization=!1;var t=e||"AgaveSink has no available sink";f(i.Error,r.Sink,(function(){return t})),this._onReady&&this._onReady(!1)},e.prototype.sendTelemetryEvent=function(e){if(this._awaitingInitialization&&this._isUsable)this._eventQueue.push(e);else if(this._sink)try{this._sink.sendTelemetryEvent(e)}catch(e){_(r.Sink,"AgaveSink",e)}else f(i.Error,r.Sink,(function(){return"AgaveSink has no available sink"}))},e.prototype.connectSink=function(e,t){this._sink=t,f(i.Info,r.Sink,(function(){return"AgaveSink is using "+e})),this._onReady&&this._onReady(!0)},e.prototype.connectRichApiSink=function(){this.connectSink("RichApiSink",new g)},e.prototype.connectAriaSink=function(){var e,t=this;e=h.getDataFieldsFromContext(),function(e){e?t.connectSink("AriaSink",e):t.failToInitialize()}(new X(e))},e.prototype.isTelemetryEnabled=function(){return!("undefined"==typeof OSF||void 0===OSF.AppTelemetry||"boolean"!=typeof OSF.AppTelemetry.enableTelemetry||!OSF.AppTelemetry.enableTelemetry)||(f(i.Warning,r.Core,(function(){return"AppTelemetry is disabled for this platform."})),!1)},e}()}]);